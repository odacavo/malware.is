import React from 'react'
import { graphql, Link, useStaticQuery } from 'gatsby'

//CSS
import * as styles from '../../css/components/home/writing.module.css'

export default function Writing() {
    const data = useStaticQuery(graphql`
    query homeWriting {
      allMarkdownRemark(
        filter: {fileAbsolutePath: {regex: "/(writing)/"}}
        limit: 5
        sort: {order: DESC, fields: frontmatter___date}
      ) {
        nodes {
          frontmatter {
            title
            slug
          }
          id
        }
      }
    }
       
    `)

    const writing = data.allMarkdownRemark.nodes

    return (
        <div className={styles.contentBlock}>
            <h2>Writing</h2>
                <ul>
                {writing.map(post => (
                    <li key={post.id}><Link to={"/writing/" + post.frontmatter.slug}>{post.frontmatter.title}</Link></li>
                ))}
                </ul>
                <Link to="/writing">Read More Â»</Link>
        </div>
    )
}
