import React from 'react'
import { graphql, Link, useStaticQuery } from 'gatsby'

//CSS
import * as styles from '../../css/components/home/projects.module.css'

export default function Projects() {
    const data = useStaticQuery(graphql`
    query homeProjects {
      allMarkdownRemark(
        filter: {fileAbsolutePath: {regex: "/(projects)/"}, frontmatter: {starred: {eq: true}}}
        limit: 5
        sort: {order: DESC, fields: frontmatter___date}
      ) {
        nodes {
          frontmatter {
            title
            slug
            source
            starred
          }
          id
        }
      }
    }
    `)

    const projects = data.allMarkdownRemark.nodes

    return (
        <div className={styles.contentBlock}>
            <h2>Projects</h2>
                <ul>
                {projects.map(post => (
                    <li key={post.id}><a href={post.frontmatter.source} target="_blank" rel="noreferrer">{post.frontmatter.title}</a></li>
                ))}
                </ul>
                <Link to="/projects">View More Â»</Link>
        </div>
    )
}
