import React from 'react'
import { graphql, Link } from 'gatsby'

//Layout
import Main from "../layouts/Main.js"

//CSS
import * as styles from '../css/components/writing/writing-post.module.css'

//Code Highlight
import { defineCustomElements as deckDeckGoHighlightElement } from "@deckdeckgo/highlight-code/dist/loader";
deckDeckGoHighlightElement();

export default function WritingDetails({ data, pageContext }) {
    const { html } = data.markdownRemark
    const { date, title, tags, description } = data.markdownRemark.frontmatter
    const timeToRead = data.markdownRemark.timeToRead
    return (
        <Main>
            <article>
            <span className={styles.breadcrumb}><Link to="/writing">Writing</Link> &#8250; <span className={styles.breadcrumbCurrent}>{title}</span></span>
                <div className={styles.frontMatter}>
                    <h1>{title}</h1>
                    <p>{description}</p>
                    <time>{date} &#8226; {timeToRead} min read</time>
                    <p>🏷️ {tags.map((tag, i) => [
                      <span key={i}><Link to={"/writing/tags/" + tag}>
                        {tag}
                        </Link>
                        {i < tags.length - 1 ? ', ' : ''}
                      </span>
                    ])}</p>
                </div>

                <div dangerouslySetInnerHTML={{ __html: html}}/>
            </article>
        </Main>
    )
}

export const query = graphql`
query Post($slug: String) {
    markdownRemark(frontmatter: {slug: {eq: $slug}}) {
      html
      frontmatter {
        date(formatString: "MMM DD, YYYY")
        title
        tags
        description
      }
      timeToRead
    }
  }
  
  
`